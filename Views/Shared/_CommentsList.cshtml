@model IEnumerable<Comment>

@* <div class="comments-section mt-3">
    @if (Model == null || !Model.Any())
    {
        <div class="text-muted small">No comments yet. Be the first to comment!</div>
    }
    else
    {
        @foreach (var c in Model)
        {
            <div class="comment-item ">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <strong>@c.AuthorName</strong>
                        <small class="text-muted">@c.PostedDate.ToString("g")</small>
                    </div>
                </div>

                <div class="mt-1">@c.Text</div>

                <!-- Reaction bar -->
                <div class="comment-reactions mt-2">
                    <span class="react-btn" data-comment="@c.Id" data-emoji="👍">👍</span>
                    <span class="react-btn" data-comment="@c.Id" data-emoji="❤️">❤️</span>
                    <span class="react-btn" data-comment="@c.Id" data-emoji="😂">😂</span>
                    <span class="react-btn" data-comment="@c.Id" data-emoji="😢">😢</span>
                    <span class="react-btn" data-comment="@c.Id" data-emoji="😡">😡</span>

                    <!-- Reaction summary -->
                    <span class="reaction-summary" id="reaction-summary-@c.Id">
                        @{
                            var summary = c.Reactions
                            .GroupBy(r => r.Emoji)
                            .Select(g => $"{g.Key} {g.Count()}")
                            .ToList();
                        }
                        @string.Join(" ", summary)
                    </span>
                </div>
            </div>
        }
    }
</div> *@
<div id="comments-list" class="comments-list">
    @foreach (var comment in Model)
    {
        <div class="fb-comment">
            <img class="avatar" src="/images/default-avatar.png" />

            <div class="comment-body">
                <div class="comment-bubble">
                    <span class="name">@comment.AuthorName</span>
                    <p class="text">@comment.Text</p>
                </div>
                <!-- Reaction bar -->
                <div class="comment-reactions mt-2">
                    <span class="react-btn" data-comment="@comment.Id" data-emoji="👍">👍</span>
                    <span class="react-btn" data-comment="@comment.Id" data-emoji="❤️">❤️</span>
                    <span class="react-btn" data-comment="@comment.Id" data-emoji="😂">😂</span>
                    <span class="react-btn" data-comment="@comment.Id" data-emoji="😢">😢</span>
                    <span class="react-btn" data-comment="@comment.Id" data-emoji="😡">😡</span>

                    <!-- Reaction summary -->
                    <span class="reaction-summary" id="reaction-summary-@comment.Id">
                        @{
                            var summary = comment.Reactions
                            .GroupBy(r => r.Emoji)
                            .Select(g => $"{g.Key} {g.Count()}")
                            .ToList();
                        }
                        @string.Join(" ", summary)
                    </span>
                </div>
                <div class="comment-meta">
                    <span class="time">@comment.PostedDate.ToString("g")</span> ·
                    <a href="#" class="reply-link">Reply</a>
                </div>
            </div>
        </div>
    }
</div>
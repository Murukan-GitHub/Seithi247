@model Seithi247.Models.News

<h1>@Model.Title</h1>
<p><small>@Model.PublishedAt.ToLocalTime().ToString("yyyy-MM-dd HH:mm") by @Model.Author</small></p>
<hr />

<div class="mb-3">
    @Html.Raw(Model.Content)
</div>

@if (Model.Images != null && Model.Images.Any())
{
    var count = Model.Images.Count;
    <div class="row g-2">
        @for (int i = 0; i < Math.Min(count, 4); i++)
        {
            var img = Model.Images.ElementAt(i);
            <div class="@(count == 1 ? "col-12"
                                                             : count == 2 ? "col-6"
                                                             : count == 3 && i == 0 ? "col-12"
                                                             : count == 3 && i > 0 ? "col-6"
                                                             : "col-6")">
        <div class="position-relative">
            <a data-fancybox="gallery" href="@img.FilePath">
                <img src="@img.FilePath"
                     class="img-fluid rounded shadow-sm"
                     style="cursor:pointer; object-fit:cover; height:@(count == 1 ? "400px" : "200px"); width:100%;" />
            </a>

            @if (i == 3 && count > 4)
                    {
                        <a data-fancybox="gallery" href="@img.FilePath">
                            <div class="position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center bg-dark bg-opacity-75 text-white fs-3 fw-bold"
                                 style="cursor:pointer;">
                                +@(count - 3)
                            </div>
                        </a>
                    }
                </div>
            </div>
        }

        <!-- Hidden extra images for Fancybox -->
        @for (int j = 4; j < count; j++)
        {
            var hiddenImg = Model.Images.ElementAt(j);
            <a data-fancybox="gallery" href="@hiddenImg.FilePath" style="display:none;"></a>
        }
    </div>
}



